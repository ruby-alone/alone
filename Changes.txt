-------------------------------------------------------------------------------

全体
 * ソースコードリポジトリのgitへの移行に伴い、ソースディレクトリ構成の変更。
   ユーザーが利用する分には、大きな変更はありません。
 * al_config の定数名の整理。

CGIモジュール
 * 実行に至るルートの整理。
    - エントリポイントで al_controller を require するように変更。
    - al_config は設定としての役割のみに変更。
 * 国際化対応。詳細は alone_gettext.md を参照してください。



-------------------------------------------------------------------------------
2025/06/24
 version 3.8 release.

全体
 * Ruby3.3 に対応しました。

CGIモジュール
 * al_server のデフォルトリスンポートを 10080 から 3000 へ変更しました。
 * AlFloatの表示(make_valueメソッド)で表示フォーマットを指定できるように機能追加
   しました。
   AlFloat.new("val1", :label=>"値1", :value_format=>"%.2f") 等として使用します。
 * Cache-Control ヘッダ内容を、最近のブラウザ, RFC等に対応して見直しました。
 * ログイン機能でログイン画面を表示した場合に、X-Frame-Options: DENY ヘッダを出力する
   ようにしました。

ワーカモジュール
 * 設定ファイル(.ini, .yaml)自動読み込み機能を実装しました。
   parse_option() へ、-c オプションの追加と、Alworker#config での参照ができます。
 * メインスレッドでの実行を任意のスレッドやシグナルハンドラから、キューを使って依頼
   できるように機能追加しました。
 * TCP/IPサーバ機能で、受信データのエンコーディングをデフォルトのUTF-8 以外にも
   対応しました。
   @tcp.set_encoding(Encoding::ASCII_8BIT) などとして指定できます。
 * OptParse ライブラリとの協調動作を容易にするメソッド append_default_option_to を
   用意しました。
 * Ruby2.7で sync ライブラリが同梱されなくなった事に対応し、sync ライブラリに依存
   する部分を使う場合のみ、ユーザ側で requre 'sync' を促すよう変更しました。
 * ファイルディスクリプタ機能のハンドラ記述方法を改善しました。


-------------------------------------------------------------------------------
2021/05/15
 version 3.7 release.

全体
 * Ruby2.7 に対応。

ワーカモジュール
 * 周期タイマーハンドラの最初の発火時間を指定できるようにした。
 * parse_option() にデーモン終了オプションとリスタートオプションを追加。

グラフモジュール
 * 速度の向上（約8%程度）
 * グラフのY軸に表示される桁数が、ときおり長い桁数が表示される現象を軽減した。
 * XYグラフを描けるようになった。
 * 対数グラフを描けるようになった。


-------------------------------------------------------------------------------
2019/12/04
 version 3.6 release.

全体
 * Ruby 2.6 に対応。

RDBWモジュール
 * mysql2 gems に対応した al_rdbw_mysql2.rb を追加した。

グラフモジュール
 * 多くのデータがある場合やデータの欠損がある場合に対するサポートを強化した。


-------------------------------------------------------------------------------
2019/02/20
 version 3.5 release.

全体
 * Ruby 2.4 に対応。

CGIモジュール
 * ver3.4で導入したテンプレート中で例外が発生してもエラーにならないようにする機能を副作用が大きすぎるため廃止した。
 * AlWidget#tag_typeに、make_tag()メソッドで出力するtypeアトリビュートを指定できるようにした。
 * 静的コンテンツのパスに関する積極的なサポートを導入した。
 * AlTimestamp,AlDate,AlTimeにおいて、min,max値を文字列で指定できるようにした。

グラフモジュール
 * Y軸のat_labels[:render]で、レンダリング用Procオブジェクトを指定できるように
   機能拡張した。
 * 散布図において、XYペアでデータを指示できる add_data_pair()メソッドを追加した。

RDBWモジュール
 * selectの戻り値パターンを、デフォルトのArray<Hash>の他に、Array<Array>も
   返すことができるようにした。
 * selectの戻り値を、一度に全部ではなく、１行ずつ取得することもできるようにした。

サンプルプログラム
 * 使い方を端的に示す簡単なものを残し、その他は削除。


-------------------------------------------------------------------------------
2018/12/13
 version 3.4 release.

クライアントライブラリ alone.js
 * Alone.strftime() メソッドの実装

グラフモジュール
 * オートスケールができない場合に、専用の例外(AutoScaleErrorX,
   AutoScaleErrorY, AutoScaleErrorY2)を発生させるように変更。
 * Y軸のゼロ点に優先的に目盛線を引くように変更。
 * 散布図描画機能を追加。

CGIモジュール
 * ログをデフォルトで /tmp/al_cgi.logとして生成するように変更。
 * html5をデフォルトに変更。
 * html空要素生成閉じタグの変更機能を抹消。
 * テンプレート <%= %> タグで例外が発生してもエラーにしないように変更。

RDBWモジュール
 * MySQLデフォルトタイムアウト値を10秒に設定。
 * PostgreSQLライブラリ pgのバージョンアップに対応。


-------------------------------------------------------------------------------
2017/4/9
version 3.3 release.

2015/1/6
AlForm 入力値フィルターに、Stringだけでなく、Lambdaオブジェクトが使えるようにした。
  :filter=>lambda { |s| s.strip }
  :filter=> [ ... ]

2015/7/19
AlGraph 折れ線やバーにIDを付ける機能を追加。
  l1 = graph.add_data_line(ydata1, "Legend1")
  l1.id = "ID1"

2015/7/19
RDBW MySQL版で、UTF8をデフォルトにした。

2015/11/26
AlWorkerTcpプロセスモデルでのソケットの扱いを改良。
closeメソッドの実装。

2016/3/10
RdbwSqlite タイムアウトデフォルト値を30秒に短縮した。

2016/11/28
標準ディレクトリ構造に従って、ファイルの整理、移動。

2017/2/9
AlGraph X軸およびY軸の単位表示機能を追加。
  graph.add_xaxis_unit("(X-unit)")
  graph.add_yaxis_unit("(Y-unit)")

2017/2/6
AlGraphPie 円グラフに凡例を表示しない場合に対し、add_data()メソッドの第2引数を指定しないことで、凡例を表示しないように改良した。

2017/2/7
AlGraph 自動でtitle属性を挿入する機能の廃止。
ブラウザでも(SVGでは) pop-up表示しない方向のようだ。


-------------------------------------------------------------------------------
2014/11/19
version 3.2 release.
コントローラアプローチをメインにしたディレクトリ構成に再パッケージング。

-------------------------------------------------------------------------------
2014/5/15
version 3.0 release.

-------------------------------------------------------------------------------
2014/1/31
AlController
　AlControllerクラスの継承を可能にした。

-------------------------------------------------------------------------------
2014/1/22
AlWorker::NumberedMessage#receive
　仕様によりトランザクションがまだ発生していない場合、次メッセージがsendされるまで待つ。ここで、次メッセージのTIDが引数のTIDと違う場合、空配列を返していた。しかし、ServerSentEvent側で使うためのcycle()と機能の対称性がなく使いにくいので、最終のメッセージを一つ返すように変更した。

AlWorker#run
　クライアント作成時のため、パラメータに :exit_idle_task を指定すると、idle_task()が終了したら、プロセスも終了するように機能追加した。

-------------------------------------------------------------------------------
2013/1/9
AlWorker
  追加

-------------------------------------------------------------------------------
2012/5/22
Alone
  バックスラッシュによる文字列エスケープメソッド escape_backslash()を追加した。

RDB wrapper
  任意クエリ発行メソッドの整理。
  run()メソッドの廃止と、execute()メソッドの実装。

-------------------------------------------------------------------------------
2011/11/21
version 2.0 release.

-------------------------------------------------------------------------------
2011/07/23
AlController
  メンテナンス性向上のため、クラス変数の利用を廃止した。
  @@session等を直接使っていた場合は、session()等のアクセッサメソッドを
  使うように書き換える必要がある。

2011/08/08
  al_config.rb の設置場所を、libから一つ上位のディレクトリに変更。

2011/08/23
Alone
  make_uri() のパラメータをURIエンコードして返すように仕様変更。
  例）make_uri(:k1=>"abc&def")    # => "k1=abc%26def"

2011/08/25
mif
  mifで追加されるアクション中で、session[:al_search_condition]に検索条件が
  保存される動作を廃止した。
  action_list()中で固定的なGETパラメータを定義して、表示位置などを制御する
  ように動作を拡張した。

2011/08/30
AlPersistRDB
  search() 及び select()にて、デフォルトで全件数を取得していた動作を廃止した。
  全件数の取得制御は、パラメータ変数 :total_rowsの扱いを拡張し、trueを渡せば
  全件カウントを行うように変更した。
   ex) @persist.search( :total_rows=>true )

mif
  上記変更のため、action_list()では、デフォルトで全件数を取得しなくなった。
  コントローラから、件数取得指示を出すサンプルは、cllection_of_booksの
  action_find() を参照のこと。

-------------------------------------------------------------------------------
